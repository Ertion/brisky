# abc记谱法
> 本文档会结合abcjs的效果来解读 

 一个ABC曲子由表头及内涵组成。在表头部分，每一行都是一个不同的领域，以一个英文字母开始，紧跟着一个冒号‘：’，然后是该领域的内容。内涵部分主要是音乐，不过也可包含几行领域文字。乐曲的结尾是由一个空行来标记（因此空行不能在表头或内涵部分出现）。
 
 ``` 
X:1
T:两只老虎
M:4/4
L:1/8
Q:1/4=120
K:F
F2 G2 A2 F2 | F2 G2 A2 F2 | A2 B2 c4 | A2 B2 c4 |
cd cB A2 F2 | cd cB A2 F2 | G2 C2 F4 | G2 C2 F4 |]
 ```

## 表头
 ```
X:1
T:两只老虎
M:4/4
L:1/8
Q:1/4=120
......
K:F
 ```

表头的第一个参数项必须为“X:”，最后一个参数项必须为“K:”。换句话说，“X:”为表头的开头而“K:”为表头的结束。其余参数项则放在这二者之间，顺序随意。

<img :src="$withBase('img/study/表头.png')" alt="表头">

### X（参考号）
 曲目编号，或者参考号，一个abc可以多少曲目，所以X必须是唯一的

### T（曲目名称）

### M（节拍）

### L（单位音符长度）
- “L:”表示曲谱中音符的音符单位，有的也叫单位音长，或者单位时长。冒号后面写分子是 1 的分数，比如“1/4”、“1/8”等等
- “L:1/8”表示以下音符中的字母如果没有加上其他符号，则视为四分音符。意思就是C代表的就是八分音符的do。C2是C的2倍，代表的是二分音符的do

### Q (曲目速度)
"Q:1/4=120”代表速度为每分钟 120 个四分音符。

### K（曲目调性）
意思是将这个调性作为do
- “K:C”代表 C 大调。降 E 大调就是“K:Eb”，升G大调就是“K:G#”，A小调就是“K:Am”，依此类推。
- 在调性名后还可以加入指定调式中某音要做特殊处理的参数值。比如对某音升高或降低半音，就在这个半角英文小写字母音名钱加半角的上尖号“^”或者半角的下划线“_”记号，“^”表示升高半音，“_”表示降低半音。
- “K:C^a”表示 C 自然大调的 a 音要升高半音。
- 调号领域值也可以包括谱号值，八度值，和转调值。例如K:G clef=soprano octave=-1 transpose=-1（用法説明于下）

### 其他
> % 表示从“%”后面开始，到“%”所在行的行尾为止，这之间的所有内容都是注解，“%”可放在任何位置。注意哈，这里百分号与其后的注视内容不属于参数值，仅是添加的注解而已。
```
T:Title %曲名
C:Composer %作者
D:discography %专辑名称
H:History %历史
S:Source %来源
N:Notes %备注
Z:Transcription note %译注
A:Area %地区
B:Book %书名
R:Rythm %节奏
P:AB.AC.ABA(AC)3 % 月段反覆模式
V:Voice indication %声音标识
```
## 内涵（音符）
 ```
F2 G2 A2 F2 | F2 G2 A2 F2 | A2 B2 c4 | A2 B2 c4 |
cd cB A2 F2 | cd cB A2 F2 | G2 C2 F4 | G2 C2 F4 |]
 ```
<img :src="$withBase('img/study/内涵.png')" alt="内涵">

### 基础含义
ABC 记谱法是用“C”、“D”、“E”、“F”、“G”、“A”、“B”七个半角英文字母来表示七个基本音名对应的音符。也就是说，用这七个字母来一一对应简谱 C 调的“1”、“2”、“3”、“4”、“5”、“6”、“7”。

### 低高音
> 钢琴上 88 个音，从低到高是：大字二组、大字一组、大字组、小字组、小字一组、小字二组、小字三组、小字四组、小字五组。
- 　ABC 记谱法用大写字母来表示小字一组的音符。“C”就是中央 C，简谱 C 调的中音 do，对应的 MIDI 音符编号是 60；“D”就是小字一组的 D，简谱 C 调的中音 re，对应的 MIDI 音符编号是 62；“B”就是小字一组的 B，简谱 C 调的中音 si，对应的 MIDI 音符编号是 71。
- ABC 记谱法用小写字母来表示小字二组的音符。“c”就是简谱 C 调的高音 do，对应的 MIDI 音符编号是 72；“b”就是简谱 C 调的高音 si，对应的 MIDI 音符编号是 83。

- 小写字母后面加一个半角的单引号“'”表示小字三组的音符；在小写字母后面加两个单引号“''”表示小字四组的音符；在小写字母后面加三个单引号“'''”表示小字五组的音符；更高的以此类推。
- 在大写字母后面加一个半角的逗号“,”表示小字组的音符；在大写字母后面加两个逗号“,,”表示大字组的音符；在大写字母后面加三个逗号“,,,”表示大字一组的音符；更低的以此类推。

例子：
```
C,,,  =>大字一组，do
C,，  =>大字组，do
C,    =>小字组，do
C     =>小字一组，中央C,do
c     =>小字二组 
c'    =>小字三组
c''   =>小字四组
c'''  =>小字五组
```
<img :src="$withBase('img/study/钢琴示意图.jpg')" alt="钢琴示意图">

### 休止符
 英文小写字母 z 来表示休止符，大写的 Z 来表示整小节休止中的休止符。

### 增时线与减时线
直接在音符后面加阿拉伯数字，是增长音符的时值，表示该音符的时值是数字前原来音符时值的倍数；在音符后面加一个半角的斜杠“/”，或者再在斜杠后面加阿拉伯数字，是减短时值，表示该音符的时值是数字前原来音符时值的几分之一；将这二者结合起来，那么音符的时值就更多样化了，这二者结合后的音符时值就是原来音符时值的几分之几了。

例子：
以"L:1/8" 为例，代表C就是八分音符的C
```
C    => 1/8的小字一组C
c    => 1/8的小字二组c
C/2  => 1/16的小字一组C
c'/2 => 1/16的小字三组C
C2   => 1/4的小字一组C
C4   => 1/2的小字一组C
C8   => 全音符C
C3   => 附点1/4的C
C3/2 => 附点1/8的C
z    => 1/8的休止符
....
```
<img :src="$withBase('img/study/增时线与减时线.png')" alt="增时线与减时线">

### 临时变音记号
```
^  => 升记号 升高半音
^^ => 重升记号 升高一个全音
^/ => 向上微调 升半个半音
_  => 降记号 降低半音
__ => 重降记号 降低一个全音
_/ => 向下微调 降半个半音
=  => 还原记号
```
<img :src="$withBase('img/study/临时记号.png')" alt="临时记号">

### 同音连线
- 在两个相邻且音高相同的音符之间加一个半角的减号“-”表示同音连线。减号与减号前面的音符不要有空格符号，减号与减号后面的音符之间可加可不加空格符号。比如“C2- C/”、“C4- | C”。
- 三连音，左括号“(”加一个数字 3，然后后面写音符就表示后面的三个时值相同的音符是三连阴的节奏。比如“(3ABC”。

<img :src="$withBase('img/study/连音.png')" alt="连音">

### 同时发声音符
用左右方括号把需要同时发声的音符括起来即可，表示增减时值的符号可以写在每个音符后面，也可以只在右方括号后面写一次就行了。如果“L:1/4”，那么 “[C2E2G2]”表示“C2”、“E2”、“G2”这三个二分音符同时发声，也可以写作“[CEG]2”。
<img :src="$withBase('img/study/同时发声.png')" alt="同时发声">


### 反复记号
```
|  => 标准的小节綫。
|| => 双小节綫。
:| => 重复上段。
|: => 重复下段。
:: => 重复上段及下段。
|1 或|[1 或| [1  => 第一次重复。
:|2或:|[2或:| [2 => 第二次重复。
|[1,3           => 第一及第三次重复。
:|[2,4          =>第二及第四次重复。

|] 及 [|   与||一样。
```

### 装饰音
- 倚音  
将倚音的音符用左右花括号“{}”括起来，放在主要的音符前面。如果倚音只有一个音符的话，需要在左花括号后先写一个斜杠符号，然后再写音符；如果倚音有两个或两个以上的音符的话，那么就不需要在左花括号后面写那个斜杠符号，直接写音符就行了。花括号内的音符不会受到“L:”字段的控制，在支持abc记谱法的打谱软件上，软件会把一个音符的倚音用八分音符来显示，把多个音符的倚音用十六分音符来显示的。也就是说，不管是一个音符的倚音，还是多个音符的倚音，我们都只是写音符的音高就行了，不用写后面表示时值的数字或斜杠。比如“{/B,}C”、“{A,B,}C”、“{A,B,C}C”。】
- 颤音  直接在主要音符钱加一个半角的英文大写字母 T 即可；或者在主要音前面加用两个半角的感叹号括起来的英文单词 trill 也可以。例如“Tc”或“!trill!c”
- 回音
直接在主要音符前加一个半角的英文大写字母 R 即可；或者在主要音前加用两个半角的感叹号括起来的英文单词 roll 也可以。例如“Rc”或“!roll!c”
- 在音符标记前的句号代表断音，staccato，例如.e或(!staccato!e abcjs 不支持)
- 在音符标记前的M代表连奏，legato，例如Me或(!legato!e abcjs 不支持)
- 在音符标记前的H代表延音，fermata，例如He或!fermata!e

<img :src="$withBase('img/study/装饰音.png')" alt="装饰音">

### 表情记号
在 ABC 记谱法里，这些表情记号用两个感叹号括起来，放在表情对象音符的前面。
```
!ppp! 极若
!pp!  很若
!p!   若
!mp!  中若
!mf!  中强
!f!   强
!ff!  很强
!fff! 极强
!breath! 呼吸
!///! 三根斜线的震音记号
!arpeggio! 琶音记号
!<(! 见强开始点 !<)! 渐强结束点
!>(! 见若开始点 !>)! 渐弱结束点
```
<img :src="$withBase('img/study/表情记号.png')" alt="表情记号">

### 文字注释
- 和弦标记,双引号把和弦名称括起来放在音符前就可以了。比如“"C"C”、“"Dm"A”、“"G7"B”。
- 钢琴指法等描述性的文字,除了用双引号括起来外，还需要在前面的双引号后面加上尖号“^”、下划线“_”、小于“<”、大于“>”或属于“@”来指定文字是标注在被注视的音符上方、下方、左边、右边或右上角。比如“"^加重"C”表示这个“C”音符上方有“加重”两个字。

<img :src="$withBase('img/study/文字注释.png')" alt="文字注释">

### 梁
abc自动构建梁 没有用空格的音符会自动识别出梁，比如，L:1/8 CB 这2个百分音符会自动构建一条梁吹来。C/2B/2，这个则是2个16分音符，有2条梁
<img :src="$withBase('img/study/梁.png')" alt="梁">

### 多声部例子
V：，指定附加的信息，例如谱号，声部在乐谱上的名称等等。声音领域值可以出现在表头部分（即在第一个调号领域值之前）。可在后面增加 octave=,八度，clef= ，谱号，及 transpose=，转音，
```
X:1
T:两只老虎
M:4/4
L:1/8
Q:1/4=120
K:F
V:1
C2 G2 A2 F2 | F2 G2 A2 F2 | A2 B2 c4 | A2 B2 c4 |
F2 G2 A2 F2 | F2 G2 A2 F2 | A2 B2 c4 | A2 B2 c4 |
  
V:2
d cB A2 F2 | cd cB A2 F2 | G2 C2 F4 | G2 C2 F4 |]
fd cB A2 F2 | cd cB A2 F2 | G2 C2 F4 | G2 C2 F4 |]

```
<img :src="$withBase('img/study/多声部.png')" alt="多声部">

## 歌词
- w:是与曲子一字配一音的歌词。当abc文件被列印成曲谱时，配合的曲行和词行交叉印出，每个字会在所配的音的下面。
- ‘附歌词’，W:是与曲谱分开来的歌词。当abc文件被列印成曲谱时，曲行和词行不交叉印出。
- 休止符不能与歌词相配。延长音，譬如 d2-d2，配以歌词时应分开来算。
w规则：
```
<空白>   分开两个词
-       分开词中的两个字
|       进到下个小节
_       上个字延长一个音
*       休息一个音
~       连接两个词
\-      列印出- (符号-有特殊用处，假如歌词中需要-，必须这么作。)
\       继续。下一个歌词，w:，领域值是这行的延续。
```
```
w: 多-雷-米匹配三个音
w: 多-雷--米匹配四个音
w: 多-雷 -米匹配四个音
w: 多__      匹配三个音
w: 多~雷~米虽然看起来是三个字，但匹配一个音
```
<img :src="$withBase('img/study/歌词.png')" alt="歌词">



## 参考文章
[老王详解ABC记谱法](http://szzyyzz.com/forum.php?mod=viewthread&tid=22) 

[链接名称](abc2015使用指南超级完整版【中文译本】)

[abc符号博客](http://abcnotation.com/blog/2010/01/31/how-to-understand-abc-the-basics/#further)








